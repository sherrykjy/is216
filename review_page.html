<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  
    <!-- <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script> -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
    

    <script type="module">

    // const firebase = require("firebase");
     // Required for side-effects
    // require("firebase/firestore");

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-app.js";
    import { getFirestore, doc, getDoc, getDocs, collection,addDoc } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-firestore.js";

    // TODO: Replace the following with your app's Firebase project configuration
    // See: https://firebase.google.com/docs/web/learn-more#config-object
    const firebaseConfig = {
        apiKey: "AIzaSyDCJI0kvCILi38Xa1KTdbLADFoOPTdYf_w",
        authDomain: "quiz-app-37a21.firebaseapp.com",
        projectId: "quiz-app-37a21",
        storageBucket: "quiz-app-37a21.appspot.com",
        messagingSenderId: "15779943372",
        appId: "1:15779943372:web:b1c987a6d0381325adc369"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);


    // Initialize Cloud Firestore and get a reference to the service
    const db = getFirestore(app);

 
    submit.addEventListener('click',(e) => {
      var name = document.getElementById('nameField').value;
      var msg = document.getElementById('messageField').value;
      var star = document.getElementsByClassName('checked').length;


      addDoc(collection(db, "review"), {
      name: name,
      message: msg,
      star: star
      });

      alert('Review added')     
    })

 
    

    </script>

    <script>
    function myFunction(star) {

    var divContent = "";
    for (var i = 0; i < star; i++) {
    divContent += `<span class="fa fa-star checked" onclick=myFunction(${i+1}) id="${i+1}"></span> `;
    }

    for (var i = star; i < 5; i++) {
    divContent += `<span class="fa fa-star" onclick=myFunction(${i+1}) id="${i+1}"></span> `;
    }
      document.getElementById("divContainer").innerHTML = `${divContent}`;
    }

    </script>

    <style>
      .checked {
      color: orange;
    }
    </style>

    
  </head>
  <body>
    <h1 id = 'target'></h1>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
  
    
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@getbootstrap">Submit Review!</button>
    
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">New message</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="recipient-name" class="col-form-label">Recipient:</label>
                <input type="text" class="form-control" id="nameField">
              </div>
              <div class="mb-3">
                <label for="message-text" class="col-form-label">Message:</label>
                <textarea class="form-control" id="messageField"></textarea>
              </div>
              <div class="mb-3">
                <label for="message-text" class="col-form-label">Rate it:</label>

                <h2>Star Rating</h2>
                <div id="divContainer">
                <span class="fa fa-star" onclick=myFunction(1) id="1"></span>
                <span class="fa fa-star" onclick=myFunction(2) id="2"></span>
                <span class="fa fa-star" onclick=myFunction(3) id="3"></span>
                <span class="fa fa-star" onclick=myFunction(4) id="4"></span>
                <span class="fa fa-star" onclick=myFunction(5) id="5"></span>
                </div>


              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button id="submit" class="btn btn-primary">Send message</button>
          </div>
        </div>
      </div>
    </div>

  </body>
</html>